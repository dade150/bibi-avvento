<!DOCTYPE html>
<html lang="it">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Il lab dell‚Äôavvento</title>

 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&display=swap" rel="stylesheet">

 <style>
  body {
   font-family: 'Mountains of Christmas', cursive;
   background-image: url('body.jpg'); /* IMMAGINE RICHIESTA */
   background-size: cover;
   background-position: center;
   background-attachment: fixed;
   color: #fff;
   min-height: 100vh;
  }

  /* --- HEADER --- */
  .title-section {
   text-align: center;
   padding: 3rem 1rem;
   position: relative;
   background-image: url('header.png'); /* IMMAGINE RICHIESTA */
   background-size: cover;
   background-position: center;
   background-repeat: no-repeat;
   color: #fff;
   overflow: hidden;
  }

  .title-section::before {
   content: "";
   position: absolute;
   inset: 0;
   background: rgba(0, 0, 0, 0.5);
   z-index: 0;
  }

  .title-section h1,
  .title-section p {
   position: relative;
   z-index: 1;
  }

  .title-section h1 {
   font-size: 3rem;
   color: gold;
   text-shadow: 0 0 8px rgba(0, 0, 0, 0.9), 0 0 12px rgba(0, 0, 0, 0.7);
  }

  .title-section p {
   font-size: 1.2rem;
   color: #fff;
   text-shadow: 0 0 6px rgba(0, 0, 0, 0.8);
  }

  /* --- CARD LAYOUT --- */
  .card-grid {
   padding: 2rem;
  }

  .advent-card {
   position: relative;
   border: none;
   overflow: hidden;
   transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth transitions */
   cursor: pointer;
   border-radius: 15px;
   height: 200px;
   display: flex;
   align-items: center;
   justify-content: center;
  }

  .advent-card.active:hover {
   transform: scale(1.05);
   box-shadow: 0 0 15px gold;
  }

  /* New style for click effect */
  .advent-card.active:active {
    transform: scale(0.98);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out; /* Quick feedback */
  }

  .advent-card.disabled {
   opacity: 0.5;
   pointer-events: none;
   filter: grayscale(100%);
  }

  .card-img-overlay {
   background-color: rgba(0, 0, 0, 0.4);
   color: white;
   display: flex;
   flex-direction: column;
   justify-content: center;
   text-align: center;
   height: 100%;
   border-radius: 15px;
   transition: background-color 0.3s ease; /* Smooth transition for overlay */
  }

  .advent-card.active:hover .card-img-overlay {
    background-color: rgba(0, 0, 0, 0.6); /* Darker overlay on hover */
  }

  .card-title {
   font-size: 1.5rem;
   font-weight: bold;
  }

  .card-subtitle {
   font-size: 1rem;
  }

  footer {
   background-color: rgba(0,0,0,0.6);
   color: gold;
   font-family: 'Mountains of Christmas', cursive;
  }
 </style>
</head>

<body>

  <audio id="bg-audio" loop>
  <source src="audio/musica-natalizia.mp3" type="audio/mpeg">
 </audio>

 <audio id="pop-sound" src="audio/pop-39222.mp3" preload="auto"></audio>

 <div class="title-section">
  <h1>üéÑ Il lab dell‚Äôavvento üéÖ</h1>
  <p>Scopri ogni giorno una sorpresa natalizia dal laboratorio!</p>
 </div>

 <div class="container card-grid">
  <div class="row g-4" id="calendar"></div>
 </div>

 <footer class="text-center py-3 mt-5">
  <p class="mb-0">¬© 2025 Il lab dell‚Äôavvento ‚Äì Realizzato con tanto cuore‚Ä¶ e un pizzico di formalina ‚ù§Ô∏èüß™</p>
 </footer>

 <script>
  const today = new Date();

  const isDecember = today.getMonth() === 9;
  const currentDay = isDecember ? today.getDate() : 0;

  const container = document.getElementById('calendar');
  const bgAudio = document.getElementById('bg-audio');
  const popSound = document.getElementById('pop-sound');

  // Autoplay background audio, or play on first click
  bgAudio.play().catch(() => {
   document.body.addEventListener('click', () => {
    bgAudio.play().catch(e => console.error("Errore nella riproduzione audio di sottofondo:", e));
   }, { once: true });
  });

  // Generate 24 cards
  for (let i = 1; i <= 24; i++) {
   const isActive = currentDay >= i && isDecember;
   const card = document.createElement('div');
   card.className = 'col-12 col-sm-6 col-lg-3';

   card.innerHTML = `
    <div class="card advent-card ${isActive ? 'active' : 'disabled'}"
      style="background-image: url('images/day${i}.jpg'); background-size: cover; background-position: center;">
     <div class="card-img-overlay">
      <h5 class="card-title">Giorno ${i}</h5>
      <p class="card-subtitle">Una sorpresa natalizia</p>
     </div>
    </div>`;

   if (isActive) {
    const adventCardElement = card.querySelector('.advent-card');
    adventCardElement.addEventListener('click', () => {
  
 if (popSound) {
    popSound.currentTime = 0;
    popSound.play().catch(e => console.error("Errore nella riproduzione del suono pop:", e));
 }

 const day = String(i).padStart(2, '0');
 
 setTimeout(() => {
   window.location.href = `giorno${day}.html`;
 }, 300);
});

   }

   container.appendChild(card);
  }
 </script>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
