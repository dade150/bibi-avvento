<!DOCTYPE html>
<html lang="it">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Giorno 1 - Il lab dell‚Äôavvento</title>

 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&display=swap" rel="stylesheet">

 <style>
  body {
   font-family: 'Mountains of Christmas', cursive;
   background-image: url('body.jpg'); 
   background-size: cover;
   background-position: center;
   background-attachment: fixed;
   color: #fff;
   min-height: 100vh;
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   padding: 2rem;
  }
  .content-box {
   background-color: rgba(0, 0, 0, 0.8); 
   border: 5px solid gold;
   border-radius: 20px;
   padding: 3rem;
   max-width: 800px;
   text-align: center;
   box-shadow: 0 0 20px rgba(0, 0, 0, 0.9);
  }
  h1 {
   color: gold;
   text-shadow: 2px 2px 4px black;
   font-size: 3rem;
  }
  p {
   font-size: 1.4rem;
   margin-top: 1.5rem;
   line-height: 1.6;
   min-height: 100px; 
  }
  .back-button, .btn-choice {
   margin: 0.5rem;
   background-color: gold;
   color: darkred;
   border: none;
   font-weight: bold;
   font-size: 1.2rem;
   padding: 0.5rem 1.5rem;
  }
  #choice-buttons {
   margin-top: 2rem;
   display: none; /* Nascosto finch√© il messaggio non finisce */
  }
  #result-area {
   margin-top: 2rem;
   min-height: 100px;
  }
  #result-area img {
   max-width: 100%;
   height: auto;
   border: 3px solid white;
   border-radius: 10px;
  }
  /* Stile per il cursore che lampeggia */
  .typing-cursor {
   display: inline-block;
   width: 2px;
   height: 1.2em;
   background-color: white;
   margin-left: 2px;
   animation: blink 0.7s infinite;
  }
  @keyframes blink {
   0%, 100% { opacity: 1; }
   50% { opacity: 0; }
  }
 </style>
</head>

<body>
 
  <audio id="sound-effect" loop>
  <source src="audio/typing.mp3" type="audio/mpeg"> 
 </audio>

 <div class="content-box">
  <h1>üåü Giorno 1: Un Inizio Scintillante! üåü</h1>
  <p>
   <strong>Messaggio del giorno:</strong><br>
   <span id="message-text"></span>
   <span id="cursor" class="typing-cursor"></span>
  </p>

    <div id="choice-buttons">
   <p style="font-size: 1.8rem; margin-bottom: 1rem;">Sei pronta per iniziare?</p>
   <button class="btn btn-choice" onclick="handleChoice(true)">S√¨</button>
   <button class="btn btn-choice" onclick="handleChoice(false)">No</button>
  </div>

    <div id="result-area"></div>

    <a href="index.html" class="btn back-button" id="back-to-calendar" style="display: none;">Torna al Calendario</a>
 </div>

 <script>
  const initialMessage = "Benvenuto nel Lab dell'Avvento! Per questo primo giorno, ecco una ricetta segreta per il perfetto punch natalizio. Metti insieme allegria, un pizzico di magia e tanto amore. Buon divertimento!";
  
  const textElement = document.getElementById('message-text');
  const cursor = document.getElementById('cursor');
  const sound = document.getElementById('sound-effect');
  const choiceButtons = document.getElementById('choice-buttons');
  const resultArea = document.getElementById('result-area');
  const backButton = document.getElementById('back-to-calendar');
  
  let i = 0;
  
  function typeWriter() {
   // Tenta di avviare l'audio
   sound.play().catch(() => {
    // Se bloccato, il tipo non inizia finch√© non c'√® interazione
    document.body.addEventListener('click', typeWriter, { once: true });
    return; 
   });
   
   function type() {
    if (i < initialMessage.length) {
     textElement.innerHTML += initialMessage.charAt(i);
     i++;
     const delay = (initialMessage.charAt(i - 1) === '.' || initialMessage.charAt(i - 1) === ',') ? 120 : 50; 
     setTimeout(type, delay);
    } else {
     // 1. Ferma l'audio
     sound.pause();
     sound.currentTime = 0;
     // 2. Nasconde il cursore
     cursor.style.display = 'none'; 
     // 3. Mostra i pulsanti di scelta
     choiceButtons.style.display = 'block';
    }
   }
   type();
  }

  function handleChoice(isReady) {
   // Nasconde i pulsanti di scelta dopo la selezione
   choiceButtons.style.display = 'none';
   resultArea.innerHTML = '';
   
   if (isReady) {
    // SCELTA S√å: Messaggio di saluto e pulsante Torna al Calendario
    resultArea.innerHTML = `
     <p style="color: lightgreen; font-size: 1.6rem;">Ci vediamo domani allora, ciao amore ‚ù§Ô∏è</p>
    `;
    backButton.style.display = 'inline-block';
   } else {
    // SCELTA NO: Immagine e "pugnetto"
    resultArea.innerHTML = `
          <img src="macchina-gialla.png" alt="Macchina gialla" class="img-fluid mb-3">
     <p style="color: yellow; font-size: 1.6rem;">Ti sei guadagnata un pugnetto! üëäüèª</p>
    `;
    // Dopo il pugnetto, vogliamo che torni indietro, quindi mostriamo il bottone di ritorno
    backButton.style.display = 'inline-block';
   }
  }
  
  // Avvia l'effetto di scrittura non appena la pagina √® pronta
  document.addEventListener('DOMContentLoaded', typeWriter);
 </script>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>