<!DOCTYPE html>
<html lang="it">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Giorno 2 - Lab Quiz</title>
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
 <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas&display=swap" rel="stylesheet">
 <style>
  * {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
  }
  
  body {
   font-family: 'Mountains of Christmas', cursive;
   background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
   color: #fff;
   min-height: 100vh;
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   padding: 2rem;
   position: relative;
   overflow-x: hidden;
   overflow-y: auto;
  }
  
  body::before {
   content: '';
   position: fixed;
   width: 100%;
   height: 100%;
   background-image: 
    radial-gradient(2px 2px at 20% 30%, white, transparent),
    radial-gradient(2px 2px at 60% 70%, white, transparent),
    radial-gradient(1px 1px at 50% 50%, white, transparent),
    radial-gradient(1px 1px at 80% 10%, white, transparent),
    radial-gradient(2px 2px at 90% 60%, white, transparent),
    radial-gradient(1px 1px at 33% 80%, white, transparent),
    radial-gradient(1px 1px at 75% 40%, white, transparent);
   background-size: 200% 200%;
   animation: float 20s ease-in-out infinite;
   opacity: 0.3;
   z-index: 0;
  }
  
  @keyframes float {
   0%, 100% { transform: translateY(0); }
   50% { transform: translateY(-20px); }
  }

  .snowflake {
   position: fixed;
   top: -10px;
   color: white;
   font-size: 1em;
   font-family: Arial, sans-serif;
   text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
   z-index: 0;
   user-select: none;
   pointer-events: none;
   animation: fall linear infinite;
  }
  
  @keyframes fall {
   to {
    transform: translateY(100vh) translateX(100px);
    opacity: 0;
   }
  }

  .quiz-container {
   flex: 1;
   display: flex;
   align-items: center;
   justify-content: center;
   width: 100%;
   z-index: 1;
  }

  .quiz-card {
   background: linear-gradient(135deg, rgba(139, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.95) 100%);
   border: 5px solid;
   border-image: linear-gradient(45deg, gold, #ffed4e, gold) 1;
   border-radius: 25px;
   padding: 3rem;
   max-width: 850px;
   width: 100%;
   box-shadow: 
    0 0 30px rgba(255, 215, 0, 0.3),
    0 0 60px rgba(255, 215, 0, 0.2),
    inset 0 0 50px rgba(0, 0, 0, 0.5);
   animation: glow-pulse 3s ease-in-out infinite;
  }
  
  @keyframes glow-pulse {
   0%, 100% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.3), 0 0 60px rgba(255, 215, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.5); }
   50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.5), 0 0 80px rgba(255, 215, 0, 0.3), inset 0 0 50px rgba(0, 0, 0, 0.5); }
  }

  .quiz-header {
   text-align: center;
   margin-bottom: 2rem;
  }

  .quiz-header h1 {
   color: gold;
   font-size: 2.8rem;
   text-shadow: 
    2px 2px 4px black,
    0 0 20px rgba(255, 215, 0, 0.5),
    0 0 30px rgba(255, 215, 0, 0.3);
   margin-bottom: 1rem;
   animation: title-glow 2s ease-in-out infinite alternate;
  }
  
  @keyframes title-glow {
   from { text-shadow: 2px 2px 4px black, 0 0 20px rgba(255, 215, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3); }
   to { text-shadow: 2px 2px 4px black, 0 0 30px rgba(255, 215, 0, 0.8), 0 0 50px rgba(255, 215, 0, 0.5); }
  }

  .intro-section {
   text-align: center;
  }

  .intro-section p {
   font-size: 1.4rem;
   line-height: 1.8;
   min-height: 100px;
  }

  .btn-choice {
   margin: 0.5rem;
   background: linear-gradient(135deg, gold 0%, #ffed4e 100%);
   color: darkred;
   border: 2px solid rgba(139, 0, 0, 0.5);
   font-weight: bold;
   font-size: 1.2rem;
   padding: 0.7rem 2rem;
   border-radius: 50px;
   transition: all 0.3s ease;
   box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
   cursor: pointer;
  }
  
  .btn-choice:hover {
   transform: translateY(-3px) scale(1.05);
   box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);
   background: linear-gradient(135deg, #ffed4e 0%, gold 100%);
  }

  .score-display {
   background: rgba(0, 0, 0, 0.4);
   border: 2px solid rgba(255, 215, 0, 0.3);
   border-radius: 15px;
   padding: 1.5rem;
   display: flex;
   justify-content: space-around;
   margin-bottom: 2rem;
  }

  .score-item {
   text-align: center;
  }

  .score-item .label {
   font-size: 1rem;
   color: #ffd700;
   margin-bottom: 0.5rem;
  }

  .score-item .value {
   font-size: 2rem;
   font-weight: bold;
   color: #fff;
   text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }

  .progress-bar-custom {
   height: 12px;
   background: rgba(255, 255, 255, 0.2);
   border-radius: 10px;
   overflow: hidden;
   margin-bottom: 2rem;
   border: 1px solid rgba(255, 215, 0, 0.3);
  }

  .progress-fill {
   height: 100%;
   background: linear-gradient(90deg, gold, #ffed4e);
   transition: width 0.5s ease;
   box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
  }

  .question-section {
   margin-bottom: 2rem;
  }

  .question-text {
   font-size: 1.6rem;
   color: #fff;
   margin-bottom: 2rem;
   text-align: center;
   line-height: 1.8;
   background: rgba(0, 0, 0, 0.4);
   border-radius: 15px;
   padding: 1.5rem;
   border: 2px solid rgba(255, 215, 0, 0.3);
   min-height: 120px;
   display: flex;
   align-items: center;
   justify-content: center;
  }

  .answer-btn {
   width: 100%;
   padding: 1.2rem;
   margin-bottom: 1rem;
   font-size: 1.2rem;
   font-family: 'Mountains of Christmas', cursive;
   background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
   border: 2px solid rgba(255, 215, 0, 0.5);
   color: #fff;
   border-radius: 15px;
   cursor: pointer;
   transition: all 0.3s ease;
   font-weight: bold;
  }

  .answer-btn:hover {
   background: linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.2) 100%);
   border-color: gold;
   transform: translateY(-3px) scale(1.02);
   box-shadow: 0 6px 25px rgba(255, 215, 0, 0.4);
  }

  .answer-btn:active {
   transform: translateY(-1px);
  }

  .answer-btn.correct {
   background: linear-gradient(135deg, rgba(0, 255, 0, 0.4) 0%, rgba(0, 200, 0, 0.3) 100%);
   border-color: #00ff00;
   animation: correctPulse 0.5s ease;
  }

  .answer-btn.wrong {
   background: linear-gradient(135deg, rgba(255, 0, 0, 0.4) 0%, rgba(200, 0, 0, 0.3) 100%);
   border-color: #ff0000;
   animation: wrongShake 0.5s ease;
  }

  @keyframes correctPulse {
   0%, 100% { transform: scale(1); }
   50% { transform: scale(1.05); }
  }

  @keyframes wrongShake {
   0%, 100% { transform: translateX(0); }
   25% { transform: translateX(-10px); }
   75% { transform: translateX(10px); }
  }

  .result-section {
   text-align: center;
   display: none;
  }

  .result-section.active {
   display: block;
   animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
   from { opacity: 0; transform: translateY(20px); }
   to { opacity: 1; transform: translateY(0); }
  }

  .result-title {
   font-size: 3rem;
   color: gold;
   margin-bottom: 1.5rem;
   text-shadow: 
    2px 2px 4px black,
    0 0 20px rgba(255, 215, 0, 0.8),
    0 0 40px rgba(255, 215, 0, 0.5);
   animation: title-glow 2s ease-in-out infinite alternate;
  }

  .result-message {
   font-size: 1.4rem;
   color: #fff;
   margin-bottom: 2rem;
   line-height: 1.8;
   background: rgba(0, 0, 0, 0.4);
   border-radius: 15px;
   padding: 1.5rem;
   border: 2px solid rgba(255, 215, 0, 0.3);
  }

  .prize-box {
   background: rgba(0, 0, 0, 0.4);
   border: 3px solid gold;
   border-radius: 15px;
   padding: 2rem;
   margin: 2rem 0;
   animation: glow-pulse 3s ease-in-out infinite;
  }

  .prize-box h3 {
   color: gold;
   font-size: 2rem;
   margin-bottom: 1rem;
   text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
  }

  .prize-box p {
   font-size: 1.3rem;
   color: #fff;
   line-height: 1.6;
  }

  .home-btn {
   padding: 1rem 3rem;
   font-size: 1.3rem;
   font-family: 'Mountains of Christmas', cursive;
   background: linear-gradient(135deg, gold 0%, #ffed4e 100%);
   color: darkred;
   border: 2px solid rgba(139, 0, 0, 0.5);
   border-radius: 50px;
   cursor: pointer;
   transition: all 0.3s ease;
   font-weight: bold;
   box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
  }

  .home-btn:hover {
   transform: translateY(-3px) scale(1.05);
   box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);
   background: linear-gradient(135deg, #ffed4e 0%, gold 100%);
  }

  .emoji-sparkle {
   display: inline-block;
   animation: gentle-shake 3s ease-in-out infinite;
  }
  
  @keyframes gentle-shake {
   0%, 100% { transform: translate(0, 0) rotate(0deg); }
   10% { transform: translate(-1px, -1px) rotate(-1deg); }
   20% { transform: translate(1px, 1px) rotate(1deg); }
   30% { transform: translate(-1px, 1px) rotate(-1deg); }
   40% { transform: translate(1px, -1px) rotate(1deg); }
   50%, 90% { transform: translate(0, 0) rotate(0deg); }
  }

  .lab-icon {
   font-size: 2rem;
   margin: 0 0.3rem;
   display: inline-block;
   animation: subtle-vibrate 4s ease-in-out infinite;
  }
  
  @keyframes subtle-vibrate {
   0%, 100% { transform: translate(0, 0); }
   15% { transform: translate(-2px, 0); }
   30% { transform: translate(2px, 0); }
   45% { transform: translate(0, -2px); }
   60% { transform: translate(0, 2px); }
   75%, 95% { transform: translate(0, 0); }
  }
 </style>
</head>

<body>

 <audio id="song-sound">
  <source src="audio/ronette.mp3" type="audio/mpeg">
 </audio>
 <audio id="correct-sound" src="audio/corretta.mp3" preload="auto"></audio>
 <audio id="wrong-sound" src="audio/wrong.mp3" preload="auto"></audio>
 <audio id="victory-sound" src="audio/natale.mp3" preload="auto"></audio>

 <div class="quiz-container">
  <div class="quiz-card">
   <div class="quiz-header">
    <h1>
     <span class="emoji-sparkle">üß™</span>
     Giorno 2 - Lab Quiz
     <span class="emoji-sparkle">üî¨</span>
    </h1>
   </div>

   <!-- Intro Section -->
   <div class="intro-section" id="intro-section">
    <p id="intro-text">Benvenuta al secondo giorno del Lab dell'Avvento! Oggi metteremo alla prova le tue conoscenze con un quiz speciale sulle tecniche di laboratorio. Vediamo quanto sei brava... üéÑ‚ù§Ô∏è</p>
    <button id="startButton" class="btn btn-choice" onclick="startQuiz()">Inizia il Quiz! ‚ú®</button>
   </div>

   <!-- Quiz Sections (hidden initially) -->
   <div id="quiz-content" style="display: none;">
    <div class="score-display">
     <div class="score-item">
      <div class="label">Domanda</div>
      <div class="value"><span id="current-question">1</span>/<span id="total-questions">5</span></div>
     </div>
     <div class="score-item">
      <div class="label">‚úÖ Corrette</div>
      <div class="value" id="correct-count">0</div>
     </div>
     <div class="score-item">
      <div class="label">‚ùå Sbagliate</div>
      <div class="value" id="wrong-count">0</div>
     </div>
    </div>

    <div class="progress-bar-custom">
     <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
    </div>

    <div class="question-section" id="question-section">
     <div class="question-text" id="question-text"></div>
     <div id="answers-container"></div>
    </div>
   </div>

   <div class="result-section" id="result-section">
    <div class="result-title" id="result-title"></div>
    <div class="result-message" id="result-message"></div>
    <div class="prize-box">
     <h3>
      <span class="lab-icon">üéÅ</span>
      Il tuo premio:
      <span class="lab-icon">‚ú®</span>
     </h3>
     <p id="prize-text"></p>
    </div>
    <button class="home-btn" onclick="window.location.href='index.html'">
     üéÑ Torna al Calendario
    </button>
   </div>
  </div>
 </div>

 <script>
  const questions = [
   {
    question: "Quale temperatura e tempo sono standard per il recupero antigenico in tampone citrato pH 6.0?",
    answers: ["95-98¬∞C per 20-40 minuti", "60¬∞C per 2 ore", "121¬∞C per 15 minuti in autoclave"],
    correct: 0
   },
   {
    question: "Nel processamento istologico, quale soluzione viene usata come agente chiarificante tra disidratazione e inclusione? (giorno 2)",
    answers: ["Acetone", "Xilene o suoi sostituti", "Etanolo assoluto"],
    correct: 1
   },
   {
    question: "Qual √® il metodo di colorazione specifico per identificare il Mycobacterium tuberculosis?",
    answers: ["Gram", "Ziehl-Neelsen", "PAS"],
    correct: 1
   },
   {
    question: "In immunoistochimica, cosa indica un controllo negativo positivo?",
    answers: ["La tecnica √® corretta", "C'√® reattivit√† aspecifica/background", "L'anticorpo funziona bene"],
    correct: 1
   },   
   {
    question: "Nel sistema di classificazione dei rifiuti sanitari, a quale categoria appartiene un vetrino con tessuto fissato in formalina?",
    answers: ["Rifiuto urbano normale", "Rifiuto speciale pericoloso a rischio infettivo", "Rifiuto speciale pericoloso non a rischio infettivo"],
    correct: 2
   },
   {
    question: "Cosa indica un valore di pH del fissativo troppo acido durante la fissazione?",
    answers: ["Migliore preservazione", "Possibile formazione di precipitati di formalina", "Nessun effetto"],
    correct: 1
   },
   {
    question: "Quale tecnica molecolare amplifica specifiche sequenze di DNA?",
    answers: ["Western blot", "PCR", "ELISA"],
    correct: 1
   },
   {
    question: "In citologia, quale fissativo viene preferito per lo striscio cervico-vaginale (Pap-test)?",
    answers: ["Formalina tamponata al 10%", "Alcol etilico al 95% o spray fissativo", "Glutaraldeide"],
    correct: 1
   }
  ];

  let currentQuestionIndex = 0;
  let correctAnswers = 0;
  let wrongAnswers = 0;
  let isAnswering = false;

  const introSection = document.getElementById('intro-section');
  const quizContent = document.getElementById('quiz-content');
  const songSound = document.getElementById('song-sound');
  
  const questionText = document.getElementById('question-text');
  const answersContainer = document.getElementById('answers-container');
  const currentQuestionSpan = document.getElementById('current-question');
  const totalQuestionsSpan = document.getElementById('total-questions');
  const correctCountSpan = document.getElementById('correct-count');
  const wrongCountSpan = document.getElementById('wrong-count');
  const progressFill = document.getElementById('progress-fill');
  const questionSection = document.getElementById('question-section');
  const resultSection = document.getElementById('result-section');

  const correctSound = document.getElementById('correct-sound');
  const wrongSound = document.getElementById('wrong-sound');
  const victorySound = document.getElementById('victory-sound');

  totalQuestionsSpan.textContent = questions.length;

  function startQuiz() {
   if (songSound) {
    songSound.currentTime = 0;
    songSound.play().catch(e => console.error("Error playing song:", e));
   }
   
   setTimeout(() => {
    introSection.style.display = 'none';
    quizContent.style.display = 'block';
    loadQuestion();
   }, 500);
  }

  function loadQuestion() {
   if (currentQuestionIndex >= questions.length) {
    showResults();
    return;
   }

   isAnswering = false;
   const question = questions[currentQuestionIndex];
   questionText.textContent = question.question;
   answersContainer.innerHTML = '';

   currentQuestionSpan.textContent = currentQuestionIndex + 1;
   const progress = ((currentQuestionIndex) / questions.length) * 100;
   progressFill.style.width = progress + '%';

   question.answers.forEach((answer, index) => {
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.textContent = answer;
    btn.onclick = () => checkAnswer(index, btn);
    answersContainer.appendChild(btn);
   });
  }

  function checkAnswer(selectedIndex, btn) {
   if (isAnswering) return;
   isAnswering = true;

   const question = questions[currentQuestionIndex];
   const allButtons = answersContainer.querySelectorAll('.answer-btn');
   
   allButtons.forEach(button => button.style.pointerEvents = 'none');

   if (selectedIndex === question.correct) {
    btn.classList.add('correct');
    correctAnswers++;
    correctCountSpan.textContent = correctAnswers;
    if (correctSound) {
        correctSound.currentTime = 0;
        correctSound.play().catch(e => console.error("Error playing correct sound:", e));
    }
   } else {
    btn.classList.add('wrong');
    wrongAnswers++;
    wrongCountSpan.textContent = wrongAnswers;
    allButtons[question.correct].classList.add('correct');
    if (wrongSound) {
        wrongSound.currentTime = 0;
        wrongSound.play().catch(e => console.error("Error playing wrong sound:", e));
    }
   }

   setTimeout(() => {
    currentQuestionIndex++;
    loadQuestion();
   }, 1500);
  }

  function showResults() {
   questionSection.style.display = 'none';
   resultSection.classList.add('active');
   
   progressFill.style.width = '100%';

   if (songSound) {
    songSound.pause();
    songSound.currentTime = 0;
   }
   if (victorySound) {
       victorySound.currentTime = 0;
       victorySound.play().catch(e => console.error("Error playing victory sound:", e));
   }

   const resultTitle = document.getElementById('result-title');
   const resultMessage = document.getElementById('result-message');
   const prizeText = document.getElementById('prize-text');

   const percentage = (correctAnswers / questions.length) * 100;

   if (percentage === 100) {
    resultTitle.innerHTML = '<span class="emoji-sparkle">üèÜ</span> PERFETTO! <span class="emoji-sparkle">üèÜ</span>';
    resultMessage.textContent = `Hai risposto correttamente a tutte le ${correctAnswers} domande! Sei una vera esperta del laboratorio!`;
    prizeText.innerHTML = '<span class="lab-icon">üåü</span> Una cioccolata calda premium con panna e marshmallow + biscotti natalizi artigianali! <span class="lab-icon">üç™</span>';
   } else if (percentage >= 80) {
    resultTitle.innerHTML = '<span class="emoji-sparkle">‚≠ê</span> OTTIMO! <span class="emoji-sparkle">‚≠ê</span>';
    resultMessage.textContent = `Hai risposto correttamente a ${correctAnswers} domande su ${questions.length}! Complimenti, conosci bene il tuo mestiere!`;
    prizeText.innerHTML = '<span class="lab-icon">‚òï</span> Una cioccolata calda con panna montata! <span class="lab-icon">‚ú®</span>';
   } else if (percentage >= 60) {
    resultTitle.innerHTML = '<span class="emoji-sparkle">üëç</span> BUONO! <span class="emoji-sparkle">üëç</span>';
    resultMessage.textContent = `Hai risposto correttamente a ${correctAnswers} domande su ${questions.length}. Non male, continua cos√¨!`;
    prizeText.innerHTML = '<span class="lab-icon">üç™</span> Un pacchetto di biscotti natalizi! <span class="lab-icon">üéÑ</span>';
   } else if (percentage >= 40) {
    resultTitle.innerHTML = '<span class="emoji-sparkle">üòä</span> DISCRETO! <span class="emoji-sparkle">üòä</span>';
    resultMessage.textContent = `Hai risposto correttamente a ${correctAnswers} domande su ${questions.length}. Forse √® ora di ripassare qualche protocollo!`;
    prizeText.innerHTML = '<span class="lab-icon">üç¨</span> Una caramella natalizia! <span class="lab-icon">‚öóÔ∏è</span>';
   } else {
    resultTitle.innerHTML = '<span class="emoji-sparkle">üòÖ</span> RITENTA! <span class="emoji-sparkle">üòÖ</span>';
    resultMessage.textContent = `Hai risposto correttamente solo a ${correctAnswers} domande su ${questions.length}. Meglio tornare in laboratorio a studiare!`;
    prizeText.innerHTML = '<span class="lab-icon">üéÖ</span> Un abbraccio virtuale e l\'incoraggiamento a rivedere le procedure di laboratorio! <span class="lab-icon">üî¨</span>';
   }
  }

  function createSnowflake() {
    const snowflake = document.createElement('div');
    snowflake.classList.add('snowflake');
    snowflake.textContent = '‚ùÑ';
    snowflake.style.left = Math.random() * 100 + '%';
    snowflake.style.animationDuration = (Math.random() * 3 + 5) + 's';
    snowflake.style.opacity = Math.random() * 0.5 + 0.5;
    snowflake.style.fontSize = (Math.random() * 20 + 10) + 'px';
    document.body.appendChild(snowflake);
    
    setTimeout(() => snowflake.remove(), 8000);
  }

  document.addEventListener('DOMContentLoaded', () => {
    setInterval(createSnowflake, 300);
  });
 </script>

 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
